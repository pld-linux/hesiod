--- hesiod-3.0.2/configure.in.orig	1996-12-08 21:27:59.000000000 +0000
+++ hesiod-3.0.2/configure.in	2008-11-14 11:02:22.000000000 +0000
@@ -14,7 +14,7 @@
 AC_EGREP_HEADER(pw_change, pwd.h, AC_DEFINE(HAVE_PW_CHANGE))
 AC_EGREP_HEADER(pw_expire, pwd.h, AC_DEFINE(HAVE_PW_EXPIRE))
 
-AC_CHECK_FUNC(res_mkquery, :, [AC_CHECK_LIB(resolv, res_mkquery)])
+AC_SEARCH_LIBS([res_mkquery], [resolv],,[AC_SEARCH_LIBS([__res_mkquery], [resolv])])
 AC_CHECK_FUNCS(strerror_r)
 
 AC_CONFIG_HEADER(config.h)
